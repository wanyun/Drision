@{
    Layout = null;
}
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>后台登录页面</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- The styles -->
    <link href="@Url.Content("~/Content/Charisma/css/bootstrap-classic.css")"  rel="stylesheet"  />
    <link href="@Url.Content("~/Content/Charisma/css/bootstrap-responsive.css")" rel="stylesheet" />
    <link href="@Url.Content("~/Content/Charisma/css/charisma-app.css")" rel="stylesheet" />
    <link href="@Url.Content("~/Content/Charisma/css/jquery-ui-1.8.21.custom.css")" rel="stylesheet" />
    <link href="@Url.Content("~/Content/Charisma/css/fullcalendar.css")" rel="stylesheet" />
    <link href="@Url.Content("~/Content/Charisma/css/fullcalendar.print.css")" rel='stylesheet' media='print'/>
    <link href="@Url.Content("~/Content/Charisma/css/chosen.css")" rel="stylesheet" />
    <link href="@Url.Content("~/Content/Charisma/css/uniform.default.css")" rel="stylesheet" />
    <link href="@Url.Content("~/Content/Charisma/css/colorbox.css")" rel="stylesheet" />
    <link href="@Url.Content("~/Content/Charisma/css/jquery.cleditor.css")" rel="stylesheet" />
    <link href="@Url.Content("~/Content/Charisma/css/jquery.noty.css")" rel="stylesheet" />
    <link href="@Url.Content("~/Content/Charisma/css/noty_theme_default.css")" rel="stylesheet" />
    <link href="@Url.Content("~/Content/Charisma/css/elfinder.min.css")" rel="stylesheet" />
    <link href="@Url.Content("~/Content/Charisma/css/elfinder.theme.css")" rel="stylesheet" />
    <link href="@Url.Content("~/Content/Charisma/css/jquery.iphone.toggle.css")" rel="stylesheet" />
    <link href="@Url.Content("~/Content/Charisma/css/opa-icons.css")" rel="stylesheet" />
    <link href="@Url.Content("~/Content/Charisma/css/uploadify.css")" rel="stylesheet" />
    <!-- The HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!---[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <!-- external javascript -->
    <!-- Placed at the end of the document so the pages load faster -->
    <!-- jQuery -->
    <script src="@Url.Content("~/Content/Charisma/js/jquery-1.7.2.min.js")"></script>
    <!-- jQuery UI -->
    <script src="@Url.Content("~/Content/Charisma/js/jquery-ui-1.8.21.custom.min.js")"></script>
    <!-- transition / effect library -->
    <script src="@Url.Content("~/Content/Charisma/js/bootstrap-transition.js")"></script>
    <!-- alert enhancer library -->
    <script src="@Url.Content("~/Content/Charisma/js/bootstrap-alert.js")"></script>
    <!-- modal / dialog library -->
    <script src="@Url.Content("~/Content/Charisma/js/bootstrap-modal.js")"></script>
    <!-- custom dropdown library -->
    <script src="@Url.Content("~/Content/Charisma/js/bootstrap-dropdown.js")"></script>
    <!-- scrolspy library -->
    <script src="@Url.Content("~/Content/Charisma/js/bootstrap-scrollspy.js")"></script>
    <!-- library for creating tabs -->
    <script src="@Url.Content("~/Content/Charisma/js/bootstrap-tab.js")"></script>
    <!-- library for advanced tooltip -->
    <script src="@Url.Content("~/Content/Charisma/js/bootstrap-tooltip.js")"></script>
    <!-- popover effect library -->
    <script src="@Url.Content("~/Content/Charisma/js/bootstrap-popover.js")"></script>
    <!-- button enhancer library -->
    <script src="@Url.Content("~/Content/Charisma/js/bootstrap-button.js")"></script>
    <!-- accordion library (optional, not used in demo) -->
    <script src="@Url.Content("~/Content/Charisma/js/bootstrap-collapse.js")"></script>
    <!-- carousel slideshow library (optional, not used in demo) -->
    <script src="@Url.Content("~/Content/Charisma/js/bootstrap-carousel.js")"></script>
    <!-- autocomplete library -->
    <script src="@Url.Content("~/Content/Charisma/js/bootstrap-typeahead.js")"></script>
    <!-- tour library -->
    <script src="@Url.Content("~/Content/Charisma/js/bootstrap-tour.js")"></script>
    <!-- library for cookie management -->
    <script src="@Url.Content("~/Content/Charisma/js/jquery.cookie.js")"></script>
    <!-- calander plugin -->
    <script src="@Url.Content("~/Content/Charisma/js/fullcalendar.min.js")"></script>
    <!-- data table plugin -->
    <script src="@Url.Content("~/Content/Charisma/js/jquery.dataTables.min.js")"></script>
    <!-- chart libraries start -->
    <script src="@Url.Content("~/Content/Charisma/js/excanvas.js")"></script>
    <script src="@Url.Content("~/Content/Charisma/js/jquery.flot.min.js")"></script>
    <script src="@Url.Content("~/Content/Charisma/js/jquery.flot.pie.min.js")"></script>
    <script src="@Url.Content("~/Content/Charisma/js/jquery.flot.stack.js")"></script>
    <script src="@Url.Content("~/Content/Charisma/js/jquery.flot.resize.min.js")"></script>
    <!-- chart libraries end -->
    <!-- select or dropdown enhancer -->
    <script src="@Url.Content("~/Content/Charisma/js/jquery.chosen.min.js")"></script>
    <!-- checkbox, radio, and file input styler -->
    <script src="@Url.Content("~/Content/Charisma/js/jquery.uniform.min.js")"></script>
    <!-- plugin for gallery image view -->
    <script src="@Url.Content("~/Content/Charisma/js/jquery.colorbox.min.js")"></script>
    <!-- rich text editor library -->
    <script src="@Url.Content("~/Content/Charisma/js/jquery.cleditor.min.js")"></script>
    <!-- notification plugin -->
    <script src="@Url.Content("~/Content/Charisma/js/jquery.noty.js")"></script>
    <!-- file manager library -->
    <script src="@Url.Content("~/Content/Charisma/js/jquery.elfinder.min.js")"></script>
    <!-- star rating plugin -->
    <script src="@Url.Content("~/Content/Charisma/js/jquery.raty.min.js")"></script>
    <!-- for iOS style toggle switch -->
    <script src="@Url.Content("~/Content/Charisma/js/jquery.iphone.toggle.js")"></script>
    <!-- autogrowing textarea plugin -->
    <script src="@Url.Content("~/Content/Charisma/js/jquery.autogrow-textarea.js")"></script>
    <!-- multiple file upload plugin -->
    <script src="@Url.Content("~/Content/Charisma/js/jquery.uploadify-3.1.min.js")"></script>
    <!-- history.js for cross-browser state change on ajax -->
    <script src="@Url.Content("~/Content/Charisma/js/jquery.history.js")"></script>
    <!-- application script for Charisma demo -->
    <script src="@Url.Content("~/Content/Charisma/js/charisma.js")"></script>
    <style type="text/css">
        body
        {
            background-color: #e2e2cd;
        }
        div#loginpanel
        {
            background-color: #f5f5ef;
        }
        img#logo
        {
            width: 50px;
            height: 60px;
        }
    </style>
</head>
<body>
    <div class="container-fluid">
        <div class="row-fluid">
            <div class="row-fluid">
                <div class="span12 center login-header">
                    <h2>
                        <img id="logo" src="../../Content/Images/logo.gif" />
                        Admin Login</h2>
                </div>
                <div class="clearfix">
                </div>
                <!--/span-->
            </div>
            <!--/row-->
            <div class="row-fluid">
                <div class="well span5 center login-box" id="loginpanel">
                    <div class="alert alert-info" style="display: none;">
                    </div>
                    <form class="form-horizontal" action="index.html" method="post">
                    <fieldset>
                        <div class="input-prepend" title="用户名" data-rel="tooltip" data-placement="right">
                            <span class="add-on"><i class="icon-user"></i></span>
                            <input autofocus class="input-large span10" name="username" id="username" type="text"
                                value="" />
                        </div>
                        <div class="clearfix">
                        </div>
                        <div class="input-prepend" title="密码" data-rel="tooltip" data-placement="right">
                            <span class="add-on"><i class="icon-lock"></i></span>
                            <input class="input-large span10" name="password" id="password" type="password" value="" />
                        </div>
                        <div class="clearfix">
                        </div>
                        <div class="input-prepend" title="验证码" data-rel="tooltip" data-placement="right">
                            <span class="add-on"><i class="icon-barcode"></i></span>
                            <input class="input-large span10" name="code" id="code" type="text" value="" />
                        </div>
                        <div class="clearfix">
                        </div>
                        <div>
                            <img src="/Login/CheckCode?ID=1" id="imgCode" alt="单击可刷新" onclick="ClickRemoveChangeCode()"
                                style="width: 67px; height: 30px" />
                            <a href="javascript:void(0)" onclick="ClickRemoveChangeCode();return false;">看不清，换一张</a>
                        </div>
                        <div class="input-prepend">
                            <label class="remember" for="remember">
                                <input type="checkbox" id="remember" />记住密码</label>
                        </div>
                        <div class="clearfix">
                        </div>
                        <p class="center span5">
                            <button type="submit" class="btn btn-info" id="loginbtn">
                                登录</button>
                        </p>
                    </fieldset>
                    </form>
                </div>
                <!--/span-->
            </div>
            <!--/row-->
        </div>
        <!--/fluid-row-->
    </div>
    <!--/.fluid-container-->
    <script type="text/javascript">

        //当用户刷新页面触发的方法
        $(function () {

            //实现用户登录的方法
            LoginUserInfo();
            //单击的时候修改验证码的方法
            ClickRemoveChangeCode();

        });

        //实现用户登录
        function LoginUserInfo() {

            //获取单击用户登录按钮的事件
            $("#loginbtn").click(function () {

                //首先获取到要传递到控制器的参数，并且狗造成Json。UName，Pwd，Code
                var postData = {
                    username: $("#username").val(),
                    password: $("#password").val(),
                    code: $("#code").val()
                };

                $("#loginbtn").html("Loading....  <img src='../../Content/Images/ajax-loader.gif' alt='Announcement' /> ");
                $("#loginbtn").attr("disabled", "disabled");

                //发送异步请求实现登录

                $.post("/Login/CheckUserInfo", postData, function (data) {

                    if (data == "OK") {
                        window.location.href = "/User/Index";
                    } else {
                        alert(data);
                        window.location.href = "/Login/Index";
                    }

                });

            });

        }
        //单击重新改变验证码
        function ClickRemoveChangeCode() {
            //首先我们获取到验证码的路径
            var code = $("#imgCode").attr("src");
            //然后重新给验证码的路径赋值
            $("#imgCode").attr("src", code + "1");

        }
 
    </script>
</body>
</html>
